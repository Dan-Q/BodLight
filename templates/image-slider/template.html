<link rel="stylesheet" type="text/css" href="../templates/image-slider/image-slider.css" />

<div class="clock" v-if="screenDisplayData.clock == '1'">
  clock
</div>

<div :class="`image-slider ${(screenDisplayData.clock == '1') ? 'with-clock' : 'without-clock'}`" :style="`width: ${screenDisplayData.items.length * 100}vw;`" :data-num-slides="screenDisplayData.items.length" :data-scroll-delay="screenDisplayData.delay">
  <div v-for="url in screenDisplayData.items" class="image" :style="`background-image: url(${url});`"></div>
</div>

<script type="text/javascript">
  (()=>{
    let scrollDelay = 10000; // milliseconds, 10,000 = default (10 seconds)
    let nowShowing = 0;
    nextSlide = ()=>{
      const imageSlider = $('.image-slider');
      const numSlides = imageSlider.data('num-slides');
      let newScrollDelay = parseInt(imageSlider.data('scroll-delay'));
      if(newScrollDelay >= 1500) scrollDelay = newScrollDelay; // if specified new scroll delay valid, use it
      nowShowing = (nowShowing + 1) % numSlides;
      imageSlider.css({ left: `-${nowShowing}00vw` });
      if(window.sliderTimeout) clearInterval(window.sliderTimeout);
      window.sliderTimeout = setTimeout(nextSlide, scrollDelay);
    }
    if(window.sliderTimeout) clearInterval(window.sliderTimeout); // kill any previous slider
    window.sliderTimeout = setTimeout(nextSlide, scrollDelay);
  })();
</script>
